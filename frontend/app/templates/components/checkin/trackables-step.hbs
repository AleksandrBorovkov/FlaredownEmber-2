{{partial "components/checkin/step-header"}}

{{#if trackableTypeIsTreatment}}

  {{#each trackeds as |tracked|}}
    {{#unless tracked.isPreparedForDestroy}}
      {{checkin-treatment model=tracked
                          onIsTakenChanged=(action 'saveChanges')
                          onDoseChanged=(action 'saveChanges')
                          onRemove=(action 'remove') }}
    {{/unless}}
  {{/each}}

{{else}}

  {{#each trackeds as |tracked|}}
    {{#unless tracked.isPreparedForDestroy}}
      {{tracked-level model=tracked
                      valueKey='value'
                      onValueChanged=(action 'saveChanges')
                      onRemove=(action 'remove') }}
    {{/unless}}
  {{/each}}

{{/if}}

{{trackables-select trackableType=trackableType
                    selected=selectedTrackable
                    onSelect=(action "add") }}

{{#unless embeddedInSummary}}
  {{step-controls step=model.currentStep
                  forwardLabel="Next"
                  disabled=checkin.hasDirtyAttributes
                  onBackward=(action "goBack")
                  onForward=(action "completeStep") }}
{{/unless}}
